<atlassian-plugin key="${project.groupId}.${project.artifactId}" name="${project.name}"
                  plugins-version="2">
    <plugin-info>
        <description>${project.description}</description>
        <version>${project.version}</version>
        <vendor name="${project.organization.name}" url="${project.organization.url}"/>
    </plugin-info>

    <junit key="all" package="com.atlassian.webhooks.plugin.junit"/>

    <servlet key="webHookServlet" class="com.atlassian.webhooks.plugin.test.WebHookServlet">
        <url-pattern>/webhooks-test*</url-pattern>
    </servlet>

    <web-item key="webhooks-admin-link" name="Webhooks Admin Link" section="index.links" weight="30">
        <label>WebHooks Admin</label>
        <link linkId="webhooks-admin">/plugins/servlet/webhooks</link>
    </web-item>

    <webhook key="testWebhook" event="test_event" url="/plugins/servlet/webhooks-test/test_event" />
    <webhook key="annotatedWebhook" event="annotated_event" url="/plugins/servlet/webhooks-test/annotated_event" />
    <webhook key="pluginEnabledWebhook" event="plugin_enabled" url="/plugins/servlet/webhooks-test/plugin_enabled" />
    <webhook key="parameterizedWebHook" event="parameterized_event" url="/plugins/servlet/webhooks-test/event_with_params">
        <param key="webhookParam">true</param>
    </webhook>

    <component key="serviceAccessor" class="com.atlassian.webhooks.plugin.test.ServiceAccessor"/>
    <component key="testWebHookProvider" class="com.atlassian.webhooks.plugin.test.TestWebHookProvider"
               interface="com.atlassian.webhooks.spi.provider.WebHookProvider" public="true" />

    <component key="testWebHookUI" class="com.atlassian.webhooks.plugin.test.ui.TestWebHookUIItem"
               interface="com.atlassian.webhooks.spi.provider.WebHookUIItem" public="true" />

    <component-import key="eventPublisher" interface="com.atlassian.event.api.EventPublisher"/>
    <component-import key="applicationProperties" interface="com.atlassian.sal.api.ApplicationProperties"/>
    <component-import key="httpClient" interface="com.atlassian.httpclient.api.HttpClient"/>
    <component-import key="templateRenderer" interface="com.atlassian.templaterenderer.TemplateRenderer" />

    <!-- Refapp -->
    <component key="checkThreadContextRefapp" class="com.atlassian.webhooks.plugin.test.refapp.CheckThreadContextRefapp"
               interface="com.atlassian.webhooks.plugin.test.CheckThreadContext" application="refapp" />
    <component-import key="refappAuthenticationContext" interface="com.atlassian.seraph.auth.AuthenticationContext" application="refapp"/>

    <!-- Confluence -->
    <component key="checkThreadContextConfluence" class="com.atlassian.webhooks.plugin.test.confluence.CheckThreadContextConfluence"
            interface="com.atlassian.webhooks.plugin.test.CheckThreadContext" application="confluence"/>

    <!-- JIRA -->
    <component key="checkThreadContextJIRA" class="com.atlassian.webhooks.plugin.test.jira.CheckThreadContextJira"
               interface="com.atlassian.webhooks.plugin.test.CheckThreadContext" application="jira"/>
    <component-import key="jiraAuthenticationContext" interface="com.atlassian.jira.security.JiraAuthenticationContext" application="jira" />

    <component key="webhookActionValidator" public="true" class="com.atlassian.webhooks.plugin.management.WebHookListenerActionValidatorImpl"
               interface="com.atlassian.webhooks.spi.provider.WebHookListenerActionValidator" />

    <component key="webHookListenerTransformer" public="true" class="com.atlassian.webhooks.plugin.management.WebHookListenerTransformerImpl"
               interface="com.atlassian.webhooks.spi.provider.WebHookListenerTransformer" />

    <web-resource key="webhooks-admin-resources">
        <context>atl.plugins.webhooks.admin</context>
        <dependency>com.atlassian.webhooks.atlassian-webhooks-plugin:webhooks-admin-resources</dependency>

        <resource type="download" name="test-webhooks.js" location="/js/test-webhooks.js" />
    </web-resource>

</atlassian-plugin>
